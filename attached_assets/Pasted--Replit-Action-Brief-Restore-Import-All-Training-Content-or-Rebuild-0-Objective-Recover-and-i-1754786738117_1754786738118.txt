üîß Replit Action Brief ‚Äî Restore/Import All Training Content (or Rebuild)
0) Objective
Recover and import all previously provided training content (step-by-step text, prerequisites, notes, resources) for every module/strategy from the very beginning.

If the original content can‚Äôt be found in the repo or history, rebuild it from the original prompts (text only; no UI fluff) and seed Supabase so all modules work.

1) Where to look first (repo + history)
Search for the legacy training text that was already written:

Likely files/paths

client/src/pages/professional-trading-academy.tsx

client/src/pages/professional-trading-academy-fixed.tsx

client/src/pages/strategy-training.tsx

Any /data/*.json or /public/data/*.json with ‚Äúmodules‚Äù, ‚Äústeps‚Äù, ‚Äúprerequisites‚Äù

Old branches or earlier commits (Replit Git)

Commands

bash
Copy
Edit
# search for typical fields used in training modules
rg -n 'steps|prerequisites|overview|resources|notes_prompt' client src data public || true

# inspect history if Git is available
git log --stat -- client/src/pages | less
git show HEAD~1:client/src/pages/professional-trading-academy.tsx | sed -n '1,200p'
git show HEAD~2:client/src/pages/strategy-training.tsx | sed -n '1,200p'
If you find arrays/objects with steps/prerequisites/overview, do not leave them in React files. Extract to JSON and import to DB (see ¬ß3‚Äì4).

2) DB schema (must exist)
Use Supabase (or Postgres) with the following:

sql
Copy
Edit
create table if not exists public.training_tracks (
  id uuid primary key default gen_random_uuid(),
  track_id text unique not null,
  title text not null
);

create table if not exists public.training_modules (
  id uuid primary key default gen_random_uuid(),
  track_id text references public.training_tracks(track_id) on delete cascade,
  slug text not null,
  "order" int not null,
  "of" int not null,
  title text not null,
  duration text,
  overview text,
  prerequisites jsonb default '[]',
  steps jsonb default '[]',
  notes_prompt text,
  resources jsonb default '{}',
  additional_resources jsonb default '[]',
  previous jsonb,
  next jsonb,
  unique(track_id, slug)
);

create table if not exists public.strategies (
  id int primary key,
  slug text unique not null,
  title text not null,
  category text,
  risk text,
  roi_range text,
  tags jsonb default '[]',
  summary text,
  track_id text,
  first_module_slug text
);
Also keep the CMS override tables we already provided (cms_content, admin_audit_log) so Admin edits win at runtime.

3) Import order of precedence (use existing content first)
Import from legacy files/history you locate in ¬ß1. Extract only the textual training info:
slug, track, order, of, title, duration, overview, prerequisites[], steps[], notes_prompt, resources{video/pdf/community}, additional_resources[]

If some modules are missing, fill gaps with the master JSONs we already supplied:

trade_ninja_master_training_v3.json (includes Passive Income, Strategy Builder, Exit Strategy, DeFi Safety, Oliver Velez, Warrior Trading, 30SecondTrader, F&C Intelligent Decision, Project Discovery, Economic Calendar)

If a strategy still has no module content (e.g., older custom ones), rebuild from the original prompt text (the user‚Äôs original descriptions) as plain module JSON (no code), then seed the DB.

4) One-time seeding route (paste in Next.js App Router)
Create app/api/admin/seed/route.ts that:

Reads /data/trade_ninja_master_training_v3.json (or any found legacy JSONs)

Upserts tracks ‚Üí modules

Upserts the 24 strategy cards (use strategies_seed_with_tracks_v3.sql if available, or upsert inline)

ts
Copy
Edit
// app/api/admin/seed/route.ts
import { NextResponse } from "next/server";
import fs from "fs";
import path from "path";
import { createClient } from "@supabase/supabase-js";

const supabase = createClient(
  process.env.NEXT_PUBLIC_SUPABASE_URL!,
  process.env.SUPABASE_SERVICE_ROLE_KEY! // server-only
);

export async function POST() {
  try {
    const base = path.join(process.cwd(), "data");
    const masterFile = path.join(base, "trade_ninja_master_training_v3.json");
    if (!fs.existsSync(masterFile)) {
      return NextResponse.json({ error: "Master JSON not found" }, { status: 400 });
    }
    const master = JSON.parse(fs.readFileSync(masterFile, "utf-8"));

    // 1) Tracks
    for (const t of master.tracks) {
      await supabase.from("training_tracks").upsert({ track_id: t.track_id, title: t.title });
      // 2) Modules
      for (const m of t.modules) {
        await supabase.from("training_modules").upsert({
          track_id: t.track_id,
          slug: m.slug,
          order: m.order, of: m.of,
          title: m.title, duration: m.duration,
          overview: m.overview,
          prerequisites: m.prerequisites || [],
          steps: m.steps || [],
          notes_prompt: m.notes_prompt || null,
          resources: m.resources || {},
          additional_resources: m.additional_resources || [],
          previous: m.previous || null,
          next: m.next || null,
        });
      }
    }

    // 3) Strategies (optional JSON file, else skip)
    const stratFile = path.join(base, "strategies_seed_with_tracks_v3.json");
    if (fs.existsSync(stratFile)) {
      const { strategies } = JSON.parse(fs.readFileSync(stratFile, "utf-8"));
      for (const s of strategies) {
        await supabase.from("strategies").upsert({
          id: s.id, slug: s.slug, title: s.title, category: s.category, risk: s.risk,
          roi_range: s.roi_range, tags: s.tags, summary: s.summary,
          track_id: s.track_id, first_module_slug: s.first_module_slug,
        });
      }
    }

    return NextResponse.json({ ok: true });
  } catch (e:any) {
    return NextResponse.json({ error: e?.message || "seed failed" }, { status: 500 });
  }
}
Run once after placing the JSONs in /data/:

bash
Copy
Edit
curl -X POST http://localhost:3000/api/admin/seed
5) Public API + pages (verify end-to-end)
GET /api/training/[track]/[slug] ‚Üí returns the module JSON from DB

Page route: /academy/module/[track]/[slug] renders:

Overview, Prerequisites, Steps, Notes prompt, Resources, Additional Resources

Prev/Next module links

Print and Download PDF buttons (we provide PDFs; link resources.pdf when present)

Strategy cards Start Training should route to /{track_id}/{first_module_slug} (all 24 are seeded via v3 SQL).

6) If the original data truly can‚Äôt be found
Rebuild from the original prompts (user‚Äôs original descriptions/scripts), and only include the information (text):

Draft neutral, instructional content for: overview, prerequisites, steps[], notes_prompt, resources (use placeholders if no links), additional_resources (optional).

Keep a consistent 8-module structure for major tracks (as in v3) and 6-module where noted.

Insert these straight into training_modules and link the corresponding strategies rows via track_id and first_module_slug.

7) Acceptance criteria
 Admin email login works; /admin is restricted to session.role="admin"

 All 24 strategy cards have live Start Training routes that open a module page

 Each module page shows Overview, Prereqs, Steps, Notes, Resources, Additional Resources, Prev/Next, Print

 GET /api/training/{track}/{slug} returns valid JSON for every module

 Legacy training content from early builds is present; where missing, rebuilt from original prompts

 Admin can override any module via /admin/content path: /academy/module/{track_id}/{module_slug}

 Print & PDF export render legibly (no dark backgrounds on print)

8) Helpful assets (if needed)
Master DB with many tracks: trade_ninja_master_training_v3.json

Strategies mapping (24 cards ‚Üí module 1 for each track): strategies_seed_with_tracks_v3.json (or .sql)

Pre-generated printable PDFs for each module (use as resources.pdf links)

Please proceed with:

Recover legacy training text and import to DB.

Seed any gaps from the provided master JSONs.

If something is still missing, rebuild from the original prompts as text-only module content, then seed.

Ping back with a list of modules you could not recover so we can spot-check before finalizing.









You said:
yes to all


ChatGPT said:
Perfect. I‚Äôve got you fully covered.

What to tell Replit (copy/paste)
Goal: Import all original training text you already had. If they can‚Äôt recover it from history, rebuild every module from the original prompts and seed the DB‚Äîso every card‚Äôs Start Training opens a complete, printable module.

Recover original content first

bash
Copy
Edit
# Search legacy files for training arrays/objects
rg -n 'steps|prerequisites|overview|resources|notes_prompt' client src data public || true

# If git is enabled, check old versions
git log --stat -- client/src/pages
git show HEAD~1:client/src/pages/professional-trading-academy.tsx | sed -n '1,300p'
git show HEAD~2:client/src/pages/strategy-training.tsx | sed -n '1,300p'
If found, extract just the text (overview, prerequisites[], steps[], etc.) into JSON and seed (see #3‚Äì4 below).

If you can‚Äôt find everything, use my master packs

Use trade_ninja_master_training_v3.json to seed tracks + modules.

Use strategies_seed_with_tracks_v3.sql to wire all 24 strategy cards to module 1 of their tracks.

If any legacy strategy had custom copy that‚Äôs still missing, rebuild it from the original prompts (text only) in the same JSON schema and upsert it.

Database schema (Supabase/Postgres)
Ensure these exist:

sql
Copy
Edit
create table if not exists public.training_tracks (...);
create table if not exists public.training_modules (...);
create table if not exists public.strategies (...);
-- (I already shared full DDL earlier in this thread.)
Seed route (run once)
Create app/api/admin/seed/route.ts as I provided earlier (reads /data/trade_ninja_master_training_v3.json, upserts to training_tracks & training_modules, and upserts strategies).

Pages & API must work

GET /api/training/[track]/[slug] returns each module.

/academy/module/[track]/[slug] renders Overview, Prereqs, Steps, Notes, Resources, Additional Resources, Prev/Next, Print.

Strategy cards route to /{track_id}/{first_module_slug} from the strategies table.

Admin can edit everything

/admin is admin-only (NextAuth with ADMIN_EMAILS).

/admin/content loads/saves JSON overrides to cms_content at deterministic paths:
/academy/module/{track_id}/{module_slug}

Deliverables to import

Master DB with all tracks:
trade_ninja_master_training_v3.json (already provided above)

Strategies upsert (24 cards mapped to modules):
strategies_seed_with_tracks_v3.sql
strategies_seed_with_tracks_v3.json

Per-track JSONs (if they want to seed individually):

Exit Strategy: exit_strategy_training_modules.json

DeFi Safety System: defi_safety_training_modules.json

Oliver Velez: oliver_velez_training_modules.json

Warrior Trading: warrior_trading_training_modules.json

30SecondTrader: t30_training_modules.json

F&C Intelligent Decision: fc_intelligent_training_modules.json

Project Discovery: project_discovery_training_modules.json

Economic Calendar: economic_calendar_training_modules.json

Printable training PDFs

Full bundle (58 files):
üì¶ trade_ninja_module_pdfs.zip

Replit should expose these via /public/pdfs or upload them and set each module‚Äôs resources.pdf to the file URL so every page shows a Download PDF button.

Acceptance criteria

All 24 strategy cards open complete modules with step-by-step text (no placeholders).

Admin can edit any module via /admin/content.

API + pages load without 404s.

Print is clean; PDFs downloadable on each module.

If you want, I can also generate a CSV export with every module‚Äôs fields so they can bulk-import via Supabase‚Äôs UI. 