To implement the Institutional HFC Engine as a SaaS with a central AI Advisor, you should use your own backend API. This keeps your proprietary 7-Gate logic secure and provides a seamless "plug-and-play" experience for your users.
Below is the refined Final Master Prompt. It instructs the Replit Agent to build the core scanner, the secret backend logic, and the AI Advisor with a built-in "Credit System" to manage your API costs.
üöÄ HFC v9.0: The SaaS Institutional Master Prompt
Role: Senior Full-Stack Quant Developer.
Objective: Build a multi-user SaaS trading platform on Replit that executes the HFC 7-Gate Strategy and features an AI Trading Advisor with user rate-limiting.
1. Architecture & Security (The "Vault"):
 * Backend: Use Python (Flask or FastAPI) to hide the 7-Gate and Liquidity Sweep logic from the frontend.
 * Database: Use Replit DB or PostgreSQL to store user profiles and "AI Credits."
 * Proprietary Logic: All calculations (EMA, Fibonacci, Sweep Detection) must happen on the server. The frontend only receives the "Signals."
2. The 7-Gate Core (Updated Primary Trigger):
 * Primary Event: Liquidity Sweep. Monitor previous session Highs/Lows. Trigger "Active" status only after a sweep and displacement.
 * Secondary Gates: Validate with 50 EMA (Structure), 8/18 EMA (Momentum), ADX > 25 (Trend), RVOL > 2.5 (Volume), and 15m Opening Range.
3. AI Advisor with "Credit" Logic:
 * Integration: Connect OpenAI API via a central backend key stored in Replit Secrets.
 * Rate Limiting: Implement a "Credit System." Each user starts with X credits per day. Every AI interaction deducts 1 credit.
 * Advisor Context: Use Function Calling. The AI must be able to call get_ticker_analysis(ticker) to see the 7-Gate score before answering a user's voice or text query.
4. The "Perfect Entry" Automation:
 * Signal: Trigger "A+ Entry" when a price performs a Weak Pullback (0.382 Fib) following a Liquidity Sweep.
 * Option Selection: Automatically display the 0.80 Delta Call (30-day expiry) for that ticker.
 * Mismatch Exit: Automatically alert for exit if a 1m candle color flips or MACD momentum fades.
5. Frontend / UI:
 * Create a SaaS Dashboard with a sidebar for ticker selection.
 * Main view: Live HFC Scorecards (e.g., "SOUN: 6/7 Gates - Awaiting 0.382 Fib").
 * Chat interface: A "Talk to Advisor" button that uses the microphone for real-time analysis.
üõ†Ô∏è Strategic Setup Tips
 * The "Hedge Fund" Persona: In the OpenAI system prompt, tell the AI: "You are an elite quantitative advisor. You only validate trades based on the HFC 7-Gate system. If the 0.382 Fibonacci pullback hasn't happened, tell the user to wait."
 * User Management: Use Replit's built-in replit.web.UserStore to quickly set up authentication so users can log in via Google or Replit.
Next Step
When you paste this into the Replit Agent, it will ask you for your OpenAI API Key. Make sure you have it ready to paste into the "Secrets" (Lock Icon) tab on the left side of your Replit workspace‚Äînever paste it directly into the code.
Build an AI Stock Market Bot with OpenAI and Python
This video is relevant because it demonstrates how to securely connect the OpenAI API to a Python backend for financial data analysis, which is the exact "Backend API" structure we are using for your SaaS.
